import React, { useEffect, useState } from 'react';
import { Parallax, ParallaxProvider} from 'react-scroll-parallax';
import Head from 'next/head';
import Header from '../components/Header/Header';
import FirstBlock from '../components/FirstBlock/FirstBlock';
import Service from '../components/Service/Service';
import OurWorks from '../components/OurWorks/OurWorks';
import Industries from '../components/Industries/Industries.jsx';
import Clutch from '../components/Clutch/Clutch';
import FAQ from '../components/FAQ/FAQ';
import GetTouch from '../components/GetTouch/GetTouch';
import Footer from '../components/Footer/Footer';
import SecondBlock from '../components/SecondBlock/SecondBlock';
import ThirdBlock from '../components/ThirdBlock/ThirdBlock';
import FourthBlock from '../components/FourthBlock/FourthBlock';
import FifthBlock from '../components/FifthBlock/FifthBlock';
import style from './index.module.css';

export default function Home() {
  const [allowHover, setAllowHover] = useState()

  const myEndFunction = () => {
    setAllowHover(true)
  }
  useEffect(() => {
    if (process.browser){
      document.getElementById("whiteBackground")?.addEventListener('animationend', myEndFunction)
    }
    return() => {
      document.getElementById("whiteBackground")?.removeEventListener('animationend', myEndFunction)
    }
  },[])
  const darker = (percentage, id) => {
    if(percentage > 0.08 && percentage < 0.4){
      document.getElementById(id).style.opacity = 0.3 - percentage
    } else{
      document.getElementById(id).style.opacity = percentage
    }
    console.log(percentage)
    // document.getElementById('darkBg').style.opacity = 
  }
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <div className={style.firstScreenWrapper}>
          <div className={style.container}>
            <div>
              <Header />
              <FirstBlock />
            </div>
            <div className={style.skillsWrapper}>
              <div className={`${style.block} ${allowHover ? style.blockHover : ""}`}>
                <span className={style.name}>
                  Development
                  <div className={style.whiteBackground}>
                    Development
                  </div>
                </span>
              </div>
              <div className={`${style.block} ${allowHover ? style.blockHover : ""}`}>
                <span className={style.name}>
                  Design
                <div className={style.whiteBackground}>
                  Design
                </div>
                </span>
              </div>
              <div className={`${style.block} ${allowHover ? style.blockHover : ""}`}>
                <span className={style.name}>
                 Management
                 <div id="whiteBackground" className={style.whiteBackground}>
                 Management
                 </div>
                </span>
              </div>
            </div>
          </div>
        </div>
        <ParallaxProvider>
          <Parallax speed={40} translateY={[3, 70, 'easeInBack']} onProgressChange={(percentage) => darker(percentage, "darkBg")}>
              <SecondBlock />
              <div id="darkBg" className={style.background}></div>
          </Parallax>
          <Parallax speed={40} translateY={[-5, 70, 'easeInBack']} onProgressChange={(percentage) => darker(percentage, "darkBg1")}>
              <ThirdBlock />
              <div id="darkBg1" className={style.background}></div>
          </Parallax>
          <Parallax speed={40} translateY={[-10, 70, 'easeInBack']} onProgressChange={(percentage) => darker(percentage, "darkBg2")}>
            <FourthBlock />
            <div id="darkBg2" className={style.background}></div>
          </Parallax>
          <Parallax speed={40} translateY={[-15, 70, 'easeInBack']} onProgressChange={(percentage) => darker(percentage, "darkBg3")}>
            <FifthBlock />
            <div id="darkBg3" className={style.background}></div>
          </Parallax>
          <Parallax speed={40} translateY={[-5, 5, 'easeInBack']}>
            <Service />
            <OurWorks />
            <Industries />
            <Clutch />
            <FAQ />
            <GetTouch />
            <Footer />
          </Parallax>
        </ParallaxProvider>
      </main>
    </>
  )
}
